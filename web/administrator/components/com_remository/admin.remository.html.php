<?php// Part of Remository, copyright (c) Martin Brampton 2005.// For further information please refer to http://www.remository.com// Don't allow direct linkingdefined( '_VALID_MOS' ) or die( 'Direct Access to this location is not allowed.' );class HTML_downloads {	function showContainersHTML( $containers, &$repository, $pageNav, $search='', $clist='' )  {		global $mosConfig_live_site;		if ($clist) {			$headertext = _DOWN_FOLDERS;			$taskname = 'showfolders';			$actname = 'editfolder';		}		else {			$headertext = _DOWN_CATS;			$taskname = 'showcats';			$actname = 'editcat';		}		?>		<div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>		<script language="Javascript" src="../includes/js/overlib_mini.js"></script>		<form action="index2.php" method="POST" name="adminForm">		<table cellpadding="4" cellspacing="0" border="0" width="100%">   		<tr>			<td width="100%">			<?php echo $repository->RemositoryImageURL('header.jpg',64,60); ?>			<span class="sectionname">			&nbsp;ReMOSitory <?php echo $headertext; ?>			</span>			</td>    	</tr>		<tr>      <td width="100%">&nbsp;</td>      <td nowrap>Display #</td>      <td> <?php echo $pageNav->writeLimitBox(); ?> </td>	  <?php if ($clist<>'') { ?>     <td>Search:</td>      <td> <input type="text" name="search" value="<?php echo $search;?>" class="inputbox" onChange="document.adminForm.submit();" />      </td>      <td width="right"> <?php echo $clist;?> </td>   <?php } ?>    </tr>  </table>		<table cellpadding="4" cellspacing="0" border="0" width="100%" class="adminlist">			<tr>				<th width="5" align="left">					<input type="checkbox" name="toggle" value="" onclick="checkAll(<?php echo count( $containers ); ?>);" />				</th>				<th class="title" width="15%"><?php echo _DOWN_NAME_TITLE; ?></th>				<th width="3%" align="left">ID</th>				<?php if ($clist) { ?>				<th width="15%" align="left"><?php echo _DOWN_PARENT_CAT; ?></th>				<th width="20%" align="left"><?php echo _DOWN_PARENT_FOLDER; ?></th>				<?php } ?>				<th width="7%" align="center"><?php echo _DOWN_PUB1; ?></th>				<th width="7%" align="left"><?php echo _DOWN_RECORDS; ?></th>				<th width="7%" align="left"><?php echo _DOWN_VISITORS; ?></th>				<th width="7%" align="left"><?php echo _DOWN_REG_USERS; ?></th>				<th width="15%" align="center"><?php echo _DOWN_GROUP; ?></th>				<?php				if (!$clist) echo '<th>&nbsp;</th>';				?>			</tr>	<?php	$k = 0;	foreach ($containers as $i=>$container) {	?>				<tr class="<?php echo "row$k"; ?>">					<td width="5">						<input type="checkbox" id="cb<?php echo $i;?>" name="cfid[]" value="<?php echo $container->id; ?>" onclick="isChecked(this.checked);" />					</td>					<td width="15%" align="left">							<a href="index2.php?option=com_remository&amp;task=<?php echo $actname; ?>&amp;cfid=<?php echo $container->id; ?>">							<?php echo $container->name; ?>						</a>					</td>					<td width="3%" align="left"><?php echo $container->id; ?></td>					<?php if ($clist) { ?>					<td width="15%" align="left"><?php echo $container->getCategoryName();?></td>					<td width="20%" align="left"><?php echo $container->getFamilyNames();?></td>					<?php }					if ($container->published==1) { ?>					<td width="7%" align="center"><img src="images/tick.png" border="0" alt="Published" /></td>					<?php } else { ?>					<td width="7%" align="left">&nbsp;</td>					<?php } ?>					<td width="7%" align="left"><?php echo $container->filecount; ?></td>					<td width="7%" align="center">					<?php					if ($container->registered & 2) echo $repository->RemositoryImageURL('download_trans.gif').'/';					else echo '-/';					if ($container->registered & 1) echo $repository->RemositoryImageURL('upload_trans.gif');					else echo '-';     				?>					</td>					<td width="7%" align="center">					<?php					if ($container->userupload & 2) echo $repository->RemositoryImageURL('download_trans.gif').'/';					else echo '-/';					if ($container->userupload & 1) echo $repository->RemositoryImageURL('upload_trans.gif');					else echo '-';     				?>					</td>					<td width="15%" align="center"><?php echo remositoryGroup::getName($container->groupid); ?></td>					<?php					if (!$clist) echo '<td>&nbsp;</td>';				$k = 1 - $k; ?>				</tr>	<?php	} //for loop	?>		<tr>      <th align="center" colspan="10"> <?php echo $pageNav->writePagesLinks(); ?></th>    </tr>    <tr>      <td align="center" colspan="10"> <?php echo $pageNav->writePagesCounter(); ?></td>    </tr>			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="<?php echo $taskname; ?>" />			<input type="hidden" name="boxchecked" value="0" />		</table>		</form>		<?php	}	function editContainerHTML( &$container, &$repository, $clist='', $oldpath='' )	{		$tabclass_arr = $repository->getTableClasses();		$iconList = remositoryContainer::getIcons ();		?>		<script language="JavaScript">		function paste_strinL(strinL){			var input=document.forms["adminForm"].elements["icon"];			input.value='';			input.value=strinL;		}		</script>		<script language="javascript" type="text/javascript">        function submitbutton(pressbutton) {                <?php getEditorContents( 'editor1', 'description' ); ?>                submitform( pressbutton );        }        </script>		<br/>		<form method="post" name="adminForm" action="index2.php">			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="<?php echo $tabclass_arr[0]; ?>">				<tr>					<td width="30%" valign="top" align="right">					<b>					<?php					if ($clist) {						echo _DOWN_SUGGEST_LOC; ?></b>&nbsp;					</td>					<td valign="top">					    <?php echo $clist; ?>					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_FOLDER_NAME;						}						else echo _DOWN_CAT_NAME; ?></b>&nbsp;					</td>					<td valign="top">						<input class="inputbox" type="text" name="name" size="50" value="<?php echo $container->name; ?>" />					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_DESC; ?></b>&nbsp;					</td>					<td valign="top">				  	<?php editorArea( 'editor1', $container->description, 'description', 500, 200, 50, 10 ); ?>					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_UP_ABSOLUTE_PATH; ?></b>&nbsp;					</td>					<td valign="top">						<input class="inputbox" type="text" name="filepath" size="50" value="<?php echo $container->filepath; ?>" />					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_ICON; ?></b>&nbsp;					</td>					<td valign="top">						<input class="inputbox" type="text" name="icon" size="25" value="<?php echo $container->icon; ?>" />						<table>							<tr>								<td>									<?php echo $iconList; ?>								</td>							</tr>						</table>					</td>				</tr>      	        <tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_VISITORS_PERMITTED; ?></b>&nbsp;					</td>					<td valign="top">					<?php					$userupdown = array(_DOWN_UP_NEITHER, _DOWN_UP_UPLOAD_ONLY, _DOWN_UP_DOWNLOAD_ONLY, _DOWN_UP_BOTH);					for ($i=0; $i<4; $i++) {						echo '<input type="radio" name="registered" value="'.$i;						if ($container->registered == $i) echo '" checked="checked" />';						else echo '" />';						echo $userupdown[$i];					}					?>				    </td>				</tr>      	        <tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_USERS_PERMITTED; ?></b>&nbsp;					</td>					<td valign="top">					<?php					for ($i=0; $i<4; $i++) {						echo '<input type="radio" name="userupload" value="'.$i;						if ($container->userupload == $i) echo '" checked="checked" />';						else echo '" />';						echo $userupdown[$i];					}					?>				    </td>			</tr>			<tr>				<td width="30%" valign="top" align="right">					<b><?php echo _DOWN_ACCESS_GROUP; ?></b>&nbsp;				</td>				<td valign="top">					<?php echo remositoryGroup::getGroupSelector($container->groupid); ?>				</td>			</tr>		</table>			<br/>			<input type="hidden" name="cfid" value="<?php echo $container->id; ?>" />			<input type="hidden" name="oldpath" value="<?php echo $oldpath; ?>" />			<input type="hidden" name="func" value="savecontainer" />			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="" />		</form>		<?php	}	function showFilesHTML( &$files, &$repository, $clist, $pageNav, $search, $limit ) {		global $mosConfig_live_site;	?>	<div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>	<script language="Javascript" src="../includes/js/overlib_mini.js"></script>	<form action="index2.php" method="post" name="adminForm">  <table cellpadding="4" cellspacing="0" border="0" width="100%">    <tr>      <td width="100%">			<?php echo $repository->RemositoryImageURL('header.jpg',64,60); ?>			<span class="sectionname">			&nbsp;ReMOSitory <?php echo _DOWN_FILES; ?>			</span>			</td>      <td nowrap>Display #</td>      <td> <?php echo $pageNav->writeLimitBox(); ?> </td>      <td>Search:</td>      <td> <input type="text" name="search" value="<?php echo $search;?>" class="inputbox" onChange="document.adminForm.submit();" />      </td>      <td width="right"> <?php echo $clist;?> </td>    </tr>  </table>		<table cellpadding="4" cellspacing="0" border="0" width="100%" class="adminlist">			<tr>				<th width="5">					<input type="checkbox" name="toggle" value="" onclick="checkAll(<?php echo count( $files );?>);" />				</th>				<th class="title"><?php echo _DOWN_NAME_TITLE; ?></th>				<th width="5%" align="left">ID</th>				<th width="20%" align="left"><?php echo _DOWN_PARENT_CAT; ?></th>				<th width="30%" align="left"><?php echo _DOWN_PARENT_FOLDER; ?></th>				<th width="10%" align="center"><?php echo _DOWN_PUB1; ?></th>				<th width="10%" align="left"><?php echo _DOWN_DOWNLOADS_SORT; ?></th>				<th width="25%">&nbsp;</th>			</tr>	<?php	$k = 0;	foreach ($files as $i=>$file) {		$parent = $file->getContainer();		if ($parent) $cat_name = $parent->getCategoryName();		else $cat_name = '-';		$fold_name = $file->getFamilyNames();	?>				<tr class="<?php echo "row$k"; ?>">					<td width="5">						<input type="checkbox" id="cb<?php echo $i;?>" name="cfid[]" value="<?php echo $file->id; ?>" onclick="isChecked(this.checked);" />					</td>					<td width="30%" align="left">							<a href="index2.php?option=com_remository&amp;task=editfile&amp;cfid=<?php echo $file->id; ?>&amp;limit=<?php echo $limit; ?>">							<?php echo $file->filetitle; ?>						</a>					</td>					<td width="5%" align="left"><?php echo $file->id;?></td>					<td width="20%" align="left"><?php echo $cat_name;?></td>					<td width="30%" align="left"><?php echo $fold_name;?></td>					<?php if ($file->published==1) { ?>					<td width="10%" align="center"><img src="images/tick.png" border="0" alt="Published" /></td>					<?php } else { ?>					<td width="10%" align="left">&nbsp;</td>					<?php } ?>					<td width="5%" align="left"><?php echo $file->downloads;?></td>					<td width="20%" align="center">&nbsp;</td>	<?php		$k = 1 - $k; ?>				</tr>	<?php	} // for loop ?>		<tr>      <th align="center" colspan="10"> <?php echo $pageNav->writePagesLinks(); ?></th>    </tr>    <tr>      <td align="center" colspan="10"> <?php echo $pageNav->writePagesCounter(); ?></td>    </tr>			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="showfiles" />			<input type="hidden" name="boxchecked" value="0" />		</table>		</form>	<?php	}	function editfileHTML( &$file, &$repository, &$remUser, $submit=false, $oldpath='', $filedata=null )	{		global $limit;		$clist = $repository->getSelectList(false,$file->containerid,'suggestloc','class="inputbox"',$remUser);		$iconList = remositoryFile::getIcons();		$tabclass_arr = $repository->getTableClasses();		if ($file->islocal) {			$displayRealname = $file->realname;			$displayURL = '';		}		else {			$displayRealname = '';			$displayURL = $file->url;		}		if ($file->id == 0) {			$file->version = $repository->Default_Version;			$file->filedate = date('Y-m-d H:i:s',time());		}				?>		<script language="JavaScript">			function paste_strinL(strinL){				var input=document.forms["adminForm"].elements["icon"];				input.value='';				input.value=strinL;			}			function clearshort(){				if (document.adminForm.autoshort.checked==true){					if (document.adminForm.description.value!=""){						if (document.adminForm.description.value.length>=(<?php echo $repository->Small_Text_Len; ?>-4)){							document.adminForm.smalldesc.value=document.adminForm.description.value.substr(0,<?php echo $repository->Small_Text_Len; ?>-4) + "...";						} else {							document.adminForm.smalldesc.value=document.adminForm.description.value;						}					} else {						document.adminForm.smalldesc.value="";					}					document.adminForm.smalldesc.disabled=true;				} else {					document.adminForm.smalldesc.value="";					document.adminForm.smalldesc.disabled=false;				}			}		</script>		<script language="javascript" type="text/javascript">        function submitbutton(pressbutton) {                <?php getEditorContents( 'description', 'description' ); ?>                submitform( pressbutton );        }        </script>		<br/>		<form method="post" name="adminForm" action="index2.php">			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="<?php echo $tabclass_arr[0]; ?>">				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_SUGGEST_LOC; ?></b>&nbsp;					</td>					<td valign="top">						<?php echo $clist; ?>					</td>				</tr>				<tr>					<td width="30%" align="right">				  	<b><?php echo _DOWN_PUB; ?></b>&nbsp;				  </td>				  <td>				  	<?php if ($file->published) { ?>							<input type="checkbox" name="published" value="1" checked="checked" />						<?php } else { ?>							<input type="checkbox" name="published" value="1" />						<?php } ?>					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">				  	<b><?php echo _DOWN_DESC; ?></b>&nbsp;<br/><I><?php echo _DOWN_DESC_MAX; ?></I>&nbsp;				  </td>				  <td valign="top">				  	<?php editorArea( 'description', $file->description, 'description', 500, 200, 50, 100 ); ?>				  </td>				</tr>				<tr>				<tr>					<td width="30%" valign="top" align="right">				  	<b><?php echo _DOWN_DESC_SMALL; ?></b>&nbsp;<br/><I><?php echo _DOWN_DESC_SMALL_MAX; ?></I>&nbsp;				  </td>				  <td valign="top">				  	<textarea class="inputbox" name="smalldesc" rows="3" cols="75"><?php echo $file->smalldesc; ?></textarea>				  </td>				</tr>				<tr>					<td width="30%" valign="top" align="right">				  	<b><?php echo _DOWN_AUTO_SHORT; ?></b>&nbsp;				  </td>				  <td valign="top">				  	<?php if ((($file->autoshort)==1) or ($file->autoshort=='')) { ?>							<input type="checkbox" name="autoshort" checked="checked" onclick="clearshort()" value="1" />				  		<script>clearshort()</script>						<?php } else { ?>							<input type="checkbox" name="autoshort" onclick="clearshort()" value="1" />						<?php } ?>					</td>				</tr>				<tr>					<td width="30%" valign="top" align="right">				  	<b><?php echo _DOWN_LICENSE; ?></b>&nbsp;<br/><I><?php echo _DOWN_DESC_MAX; ?></I>&nbsp;				  </td>				  <td valign="top">				  	<textarea class="inputbox" name="license" rows="6" cols="75"><?php echo $file->license; ?></textarea>				  </td>				</tr>				<tr>					<td width="30%" align="right">				  	<b><?php echo _DOWN_LICENSE_AGREE; ?></b>&nbsp;				  </td>				  <td>				  	<?php if (($file->licenseagree)==1) { ?>							<input type="checkbox" NAME="licenseagree" value="1" checked="checked" />						<?php } else { ?>							<input type="checkbox" NAME="licenseagree" value="1" />						<?php } ?>					</td>				</tr>				<?php				if ($file->islocal) {				?>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWN_REAL_NAME; ?></b>&nbsp;					</td>					<td valign="top">	    				<input class="inputbox" type="text" name="realname" size="75" value="<?php echo $displayRealname; ?>" />					</td>				</tr>				<?php				}				else {				?>				<tr>					<td width="30%" valign="top" align="right">						<b><?php echo _DOWNLOAD_URL; ?></b>&nbsp;					</td>					<td valign="top">	    				<input class="inputbox" type="text" name="url" size="75" value="<?php echo $displayURL; ?>" />					</td>				</tr>				<?php				}				if (!$submit) { ?>					<tr>						<td width="30%" valign="top" align="right">&nbsp;						</td>						<td>							Add files to download directory by FTP, then click links in Remove Orphans/Handle Unlinked Files						</td>					</tr>					<?php } ?>				  <tr>				  	<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_TITLE; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="filetitle" size="25" value="<?php echo $file->filetitle; ?>" />						</td>					</tr>				  <tr>				  	<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_VER; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="fileversion" size="25" value="<?php echo $file->fileversion; ?>" />						</td>					</tr>					<tr>						<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_AUTHOR; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="fileauthor" size="25" value="<?php echo $file->fileauthor; ?>">						</td>					</tr>					<tr>						<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_DATE; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="filedate" size="25" value="<?php echo $file->filedate; ?>" />						</td>					</tr>					<tr>						<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_SIZE; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="filesize" size="25" value="<?php echo $file->filesize; ?>" />						</td>					</tr>				  <tr>				  	<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_TYPE; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="filetype" size="25" value="<?php echo $file->filetype; ?>" />						</td>					</tr>				  <tr>				  	<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_FILE_HOMEPAGE; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="filehomepage" size="75" value="<?php echo $file->filehomepage; ?>" />						</td></tr>				  <tr>				 		<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_SCREEN; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="screenurl" size="75" value="<?php echo $file->screenurl; ?>" />						</td>					</tr>					<tr>						<td width="30%" valign="top" align="right">							<b><?php echo _DOWN_ICON; ?></b>&nbsp;						</td>						<td valign="top">							<input class="inputbox" type="text" name="icon" size="25" value="<?php echo $file->icon; ?>" />					  	<table>					  		<tr>					  			<td>										<?php echo $iconList; ?>									</td>								</tr>							</table>						</td>					</tr>				</table>			<input type="hidden" name="func" value="savefile" />			<input type="hidden" name="islocal" value="<?php echo $file->islocal; ?>" />			<input type="hidden" name="cfid" value="<?php echo $file->id; ?>" />			<input type="hidden" name="oldid" value="<?php if (isset($file->oldid)) echo $file->oldid; ?>" />			<input type="hidden" name="filetempname" value="<?php if (isset($file->filetempname)) echo $file->filetempname; ?>" />			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="" />			<input type="hidden" name="limit" value="<?php echo $limit; ?>" />			<input type="hidden" name="oldpath" value="<?php echo $oldpath; ?>" />			<input type="hidden" name="filetemp">			<input type="hidden" name="filetemphash">		</form>		<?php	}	function approveHTML( &$files, &$repository, &$pageNav, $search ) {		global $mosConfig_live_site;	?>	<div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>	<script language="Javascript" src="../includes/js/overlib_mini.js"></script>	<form action="index2.php" method="post" name="adminForm">  <table cellpadding="4" cellspacing="0" border="0" width="100%">    <tr>      <td width="100%">			<?php echo $repository->RemositoryImageURL('header.jpg',64,60); ?>			<span class="sectionname">			&nbsp;ReMOSitory <?php echo _DOWN_APPROVE_TITLE; ?>			</span>			</td>      <td nowrap>Display #</td>      <td> <?php echo $pageNav->writeLimitBox(); ?> </td>      <td>Search:</td>      <td> <input type="text" name="search" value="<?php echo $search;?>" class="inputbox" onChange="document.adminForm.submit();" />      </td>    </tr>  </table>		<table cellpadding="4" cellspacing="0" border="0" width="100%" class="adminlist">			<tr>				<th width="5">					<input type="checkbox" name="toggle" value="" onclick="checkAll(<?php echo count( $files );?>);" />				</th>				<th class="title">Name</th>				<th width="25%" align="left"><?php echo _DOWN_PARENT_CAT; ?></th>				<th width="25%" align="left"><?php echo _DOWN_PARENT_FOLDER; ?></th>				<th width="20%" align="left"><?php echo _DOWN_DATE; ?></th>				<th width="30%">&nbsp;</th>			</tr>	<?php	$k = 0;	foreach ($files as $file) {		$parent = $file->getContainer();		if (!$parent) {			$cat_name = '-';			$fold_name = '-';		}		elseif ($parent->isCategory()) {			$cat_name = $parent->name;			$fold_name = '-';		}		else {			$cat_name = '-';			$fold_name = $parent->name;		}	?>				<tr class="<?php echo "row$k"; ?>">					<td width="5">						<input type="checkbox" id="cb<?php echo $i;?>" name="cfid[]" value="<?php echo $file->id; ?>" onclick="isChecked(this.checked);" />					</td>					<td width="30%" align="left">							<a href="index2.php?option=com_remository&task=editapprove&cfid=<?php echo $file->id; ?>">							<?php echo $file->filetitle; ?>						</a>					</td>					<td width="25%" align="left"><?php echo $cat_name;?></td>					<td width="25%" align="left"><?php echo $fold_name;?></td>					<td width="30%" align="left"><?php echo $file->filedate;?></td>					<td width="40%" align="center">&nbsp;</td>	<?php		$k = 1 - $k; ?>				</tr>	<?php	} // for loop ?>			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="approve" />			<input type="hidden" name="boxchecked" value="0" />		</table>		</form>	<?php	}	function orphansHTML( &$DelArrayDownPath, &$DelArrayUpPath, &$DelArrayDownFile, &$DelArrayOldPath )	{		global $mosConfig_live_site;		?>		<div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>		<script language="Javascript" src="../includes/js/overlib_mini.js"></script>		<form action="index2.php" method="post" name="adminForm">		<table cellpadding="4" cellspacing="0" border="0" width="100%">    <tr>      <td width="100%">			<img src='<?php echo $mosConfig_live_site; ?>/components/com_remository/images/header.jpg' border='0' align='absmiddle'>			<span class="sectionname">			&nbsp;ReMOSitory Orphans			</span>	   </td>    </tr>  	</table>		<table cellpadding="4" cellspacing="0" border="0" width="100%" class="adminlist">			<tr>				<th width="5">					<input type="checkbox" name="toggle" value="" onclick="checkAll(<?php echo count($DelArrayDownPath)+count($DelArrayUpPath); ?>);" />				</th>				<th class="title">Path</th>				<th width="40%">&nbsp;</th>			</tr>	<?php	$k = 0;	for ($i=0, $n=count( $DelArrayDownPath ); $i < $n; $i++) {		$row = &$DelArrayDownPath[$i];		if ($DelArrayOldPath[$i]) $oldparm = '&amp;oldpath='.$DelArrayOldPath[$i];		else $oldparm = '';	?>				<tr class="<?php echo "row$k"; ?>">					<td width="5">						<input type="checkbox" id="cb<?php echo $i;?>" name="cfid[]" value="<?php echo $DelArrayDownPath[$i]; ?>" onclick="isChecked(this.checked);" />					</td>					<td width="60%" align="left">							<a href="index2.php?option=com_remository&amp;task=addorphan&amp;filepath=<?php echo $DelArrayDownPath[$i].$oldparm; ?>"><?php echo $row; ?></a>					</td>					<td width="40%"><td>	<?php		$k = 1 - $k; ?>				</tr>	<?php	} // for loop ?>	<?php	$lastfor = 0;	$lastfor = $i;	for ($i=0, $n=count( $DelArrayUpPath ); $i < $n; $i++) {		$row = &$DelArrayUpPath[$i];	?>				<tr class="<?php echo "row$k"; ?>">					<td width="5">						<input type="checkbox" id="cb<?php echo $i+$lastfor;?>" name="cfid[]" value="<?php echo $DelArrayUpPath[$i]; ?>" onclick="isChecked(this.checked);" />					</td>					<td width="60%" align="left">							<?php echo $row; ?>					</td>					<td width="40%"><td>	<?php		$k = 1 - $k; ?>				</tr>	<?php	} // for loop ?>			<input type="hidden" name="option" value="com_remository" />			<input type="hidden" name="task" value="showorphans" />			<input type="hidden" name="boxchecked" value="0" />		</table>		</form>	<?php	}	function configHTML( $repository, $newlist, $yesno )	{		global $mosConfig_live_site;		?>	<table cellpadding="4" cellspacing="0" border="0" width="100%">			<tr>	      <td width="100%">					<img src='<?php echo $mosConfig_live_site; ?>/components/com_remository/images/header.jpg' border='0' align='absmiddle'>					<span class="sectionname">						&nbsp;ReMOSitory <?php echo _DOWN_CONFIG_TITLE; ?>					</span>				</td>			</tr>			</table>	<script language="javascript" src="js/dhtml.js"></script>	<table cellpadding="3" cellspacing="0" border="0" width="100%">	  <tr>	    <td width="" class="tabpadding">&nbsp;</td>	    <td id="tab1" class="offtab" onclick="dhtml.cycleTab(this.id)"><?php echo _DOWN_CONFIG_TITLE1; ?></td>	    <td id="tab2" class="offtab" onclick="dhtml.cycleTab(this.id)"><?php echo _DOWN_CONFIG_TITLE2; ?></td>	    <td width="90%" class="tabpadding">&nbsp;</td>	  </tr>	</table>	<form action="index2.php" method="POST" name="adminForm">	  <div id="page1" class="pagetext">	    <table cellpadding="2" cellspacing="4" border="0" width="100%" class="adminform">	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG1; ?></td>	        <td> <input class="inputbox" type="text" name="tabclass" size="50" value="<?php echo $repository->tabclass; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG2; ?></td>	        <td> <input class="inputbox" type="text" name="tabheader" size="50" value="<?php echo $repository->tabheader; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG19; ?></td>	        <td> <input class="inputbox" type="text" name="headerpic" size="50" value="<?php echo $repository->headerpic; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG4; ?></td>	        <td> <input class="inputbox" type="text" name="Down_Path" size="50" value="<?php echo $repository->Down_Path; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG5; ?></td>	        <td> <input class="inputbox" type="text" name="Up_Path" size="50" value="<?php echo $repository->Up_Path; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG21; ?></td>	        <td> <input class="inputbox" type="text" name="Large_Text_Len" size="50" value="<?php echo $repository->Large_Text_Len; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG22; ?></td>	        <td> <input class="inputbox" type="text" name="Small_Text_Len" size="50" value="<?php echo $repository->Small_Text_Len; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG23; ?></td>	        <td> <input class="inputbox" type="text" name="Small_Image_Width" size="50" value="<?php echo $repository->Small_Image_Width; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG24; ?></td>	        <td> <input class="inputbox" type="text" name="Small_Image_Height" size="50" value="<?php echo $repository->Small_Image_Height; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG6; ?></td>	        <td> <input class="inputbox" type="text" name="MaxSize" size="50" value="<?php echo $repository->MaxSize; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG7; ?></td>	        <td> <input class="inputbox" type="text" name="Max_Up_Per_Day" size="50" value="<?php echo $repository->Max_Up_Per_Day; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG8; ?></td>	        <td> <input class="inputbox" type="text" name="Max_Up_Dir_Space" size="50" value="<?php echo $repository->Max_Up_Dir_Space; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG30; ?></td>	        <td> <input class="inputbox" type="text" name="Favourites_Max" size="50" value="<?php echo $repository->Favourites_Max; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG31; ?></td>	        <td> <input class="inputbox" type="text" name="Date_Format" size="50" value="<?php echo $repository->Date_Format; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG32; ?></td>	        <td> <input class="inputbox" type="text" name="Default_Version" size="50" value="<?php echo $repository->Default_Version; ?>" /></td>	      </tr>	    </table>	  </div>	  <div id="page2" class="pagetext">	    <table cellpadding="2" cellspacing="0" border="0" width="100%" class="adminform">	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG9; ?></td>	        <td>	        	<input class="inputbox" type="text" name="ExtsOk" size="50" value="<?php echo $repository->ExtsOk; ?>" /></td>	      </tr>	      <?php	      foreach ($newlist as $listitem) {	      	$makelist = "echo mosHTML::selectList(\$yesno, '$listitem->variablename', 'class=\"inputbox\" size=\"1\"', 'value', 'text', \$repository->$listitem->variablename);";			?> <tr><td width="500">			<?php echo $listitem->description; ?>			</td><td>			<?php eval($makelist); ?>			</td>	      </tr>	      <?php } ?>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG17; ?></td>	        <td> <input class="inputbox" type="text" name="Sub_Mail_Alt_Addr" size="50" value="<?php echo $repository->Sub_Mail_Alt_Addr; ?>" /></td>	      </tr>	      <tr>	        <td width="500"><?php echo _DOWN_CONFIG18; ?></td>	        <td> <input class="inputbox" type="text" name="Sub_Mail_Alt_Name" size="50" value="<?php echo $repository->Sub_Mail_Alt_Name; ?>" /></td>	      </tr>	    </table>	  </div>	  <input type="hidden" name="task" value="" />	  <input type="hidden" name="option" value="com_remository" />	</form>	<script language="javascript" type="text/javascript">			dhtml.cycleTab('tab1');			</script>		<?php	}	function statsHTML( &$downloads, &$ratings, &$votes )	{		global $mosConfig_live_site;	?>	<table cellpadding="4" cellspacing="0" border="0" width="100%">    <tr>      <td width="100%">			<img src='<?php echo $mosConfig_live_site; ?>/components/com_remository/images/header.jpg' border='0' align='absmiddle'>			<span class="sectionname">			&nbsp;ReMOSitory <?php echo _DOWN_STATS_TITLE; ?>			</span>			</td>    </tr>	</table>	<table cellpadding="4" cellspacing="0" border="0" width="100%" class="adminlist">		<tr>			<td width="15%" align="left">				<b><?php echo _DOWN_TOP_TITLE; ?> 5 <?php echo _DOWN_DOWNLOADS_SORT; ?></b>			</td>			<td>&nbsp;</td>			<td><?php echo _DOWN_DOWNLOADS_SORT; ?></td>			<tr>			<td>				<?php foreach ($downloads as $download) { ?>				<tr>					<td width="1%">						&nbsp;					</td>					<td width="40%" align="left">						<?php echo $download->filetitle; ?>					</td>					<td width="60%" align="left">						<?php echo $download->downloads; ?>					</td>				</tr>				<?php } ?>			</td>			</tr>			<tr>				<td>					&nbsp;				</td>				<td>&nbsp;</td>				<td>&nbsp;</td>			</tr>			<td width="15%">				<b><?php echo _DOWN_TOP_TITLE; ?> 5 <?php echo _DOWN_RATED_TITLE; ?></b>			</td>			<td>&nbsp;</td>			<td><?php echo _DOWN_RATING_TITLE; ?></td>			<tr>			<td>				<?php for ($i=0, $n=count( $ratings ); $i < $n; $i++) {					$rate=split(",", $ratings[$i]);					?>				<tr>					<td width="1%">						&nbsp;					</td>					<td width="40%" align="left">						<?php echo $rate[0]; ?>					</td>					<td width="60%" align="left">						<?php echo $rate[1]; ?>					</td>				</tr>				<?php } ?>			</td>			</tr>			<tr>				<td>					&nbsp;				</td>				<td>&nbsp;</td>				<td>&nbsp;</td>			</tr>			<td width="15%">				<b><?php echo _DOWN_TOP_TITLE; ?> 5 <?php echo _DOWN_VOTED_ON; ?></b>			</td>			<td>&nbsp;</td>			<td><?php echo _DOWN_VOTES_TITLE; ?></td>			<tr>			<td>				<?php for ($i=0, $n=count( $votes ); $i < $n; $i++) {					$vote=split(",", $votes[$i]);					?>				<tr>					<td width="1%">						&nbsp;					</td>					<td width="40%" align="left">						<?php echo $vote[0]; ?>					</td>					<td width="60%" align="left">						<?php echo $vote[1]; ?>					</td>				</tr>				<?php } ?>			</td>			</tr>		</tr>	</table>	<?php	}	function aboutHTML()	{		global $mosConfig_live_site, $ReMOSver;	?>	<table cellpadding="4" cellspacing="0" border="0" width="100%">    <tr>      <td width="100%">			<img src='<?php echo $mosConfig_live_site; ?>/components/com_remository/images/header.jpg' border='0' align='absmiddle'>			<span class="sectionname">			&nbsp;ReMOSitory <?php echo _DOWN_ABOUT; ?>			</span>			</td>    </tr>	</table>	<table cellpadding="4" cellspacing="0" border="0" width="100%" class="">		<tr>			<td>				<?php echo _DOWN_TITLE_ABOUT; ?>			</td>			<td>				ReMOSitory - A MamboOpenSource 4.5+ File Repository			</td>		</tr>		<tr>			<td>				<?php echo _DOWN_VERSION_ABOUT; ?>			</td>			<td>				<?php echo $ReMOSver; ?>			</td>		</tr>		<tr>			<td>				<?php echo _DOWN_AUTHOR_ABOUT; ?>			</td>			<td>				Martin Brampton			</td>		</tr>		<tr>			<td>				<?php echo _DOWN_WEBSITE_ABOUT; ?>			</td>			<td>				<a href=http://www.remository.com target="_blank">www.remository.com</a>			</td>		</tr>		<tr>			<td>				<?php echo _DOWN_EMAIL_ABOUT; ?>			</td>			<td>				martin@remository.com			</td>		</tr>	</tr>	</table>	<?php	}}?>